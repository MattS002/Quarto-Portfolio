<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matthew Swanson">

<title>Religion and Politics Factorial ANOVA in R – Matthew Swanson</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-8dd1961faa9fed8eaeb307954bd3f3df.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-5c82de8d99bcb8f0803f0fff0461afcb.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/Logo.gif" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Matthew Swanson</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../PortMain.html"> 
<span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../DataViz.html"> 
<span class="menu-text">Data Viz Portfolio</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/matthew-swanson-phd-335942137"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:mattswnsn53@gmail.com"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Matthew Austin Swanson CV 2025.pdf"> <i class="bi bi-file-text" role="img">
</i> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/MattS002/Quarto-Portfolio">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/MattS002/Quarto-Portfolio/issues">
 <span class="dropdown-text">Report an issue</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#project-goal" id="toc-project-goal" class="nav-link active" data-scroll-target="#project-goal"><strong>Project Goal</strong></a></li>
  <li><a href="#solution-1" id="toc-solution-1" class="nav-link" data-scroll-target="#solution-1"><strong>Solution 1</strong></a></li>
  <li><a href="#solution-2" id="toc-solution-2" class="nav-link" data-scroll-target="#solution-2"><strong>Solution 2</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Religion and Politics Factorial ANOVA in R</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Factorial ANOVA</div>
    <div class="quarto-category">R</div>
    <div class="quarto-category">Religion</div>
    <div class="quarto-category">Constrast Coding</div>
    <div class="quarto-category">phia</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Matthew Swanson </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="project-goal" class="level1 text-center">
<h1><strong>Project Goal</strong></h1>
</section>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="..\images/religpic.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>A client requested to better understand the religious attendance of their constituents and how both their constituent’s race and political identity shape religious attendance (with higher scores indicating greater attendance to religious gatherings/events). Additionally, the client specifically requested to compare White, Black, and Hispanic constituents. Thus, the goal of this project was to clean the data and understand how identity shapes religious attendance.</p>
<p>First, the data needs to be cleaned:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Data <span class="ot">&lt;-</span> <span class="fu">subset</span>(Data, PARTYID<span class="sc">!=</span> <span class="dv">1</span> <span class="sc">&amp;</span> PARTYID<span class="sc">!=</span> <span class="dv">2</span> <span class="sc">&amp;</span> PARTYID<span class="sc">!=</span> <span class="dv">3</span> <span class="sc">&amp;</span> PARTYID<span class="sc">!=</span> <span class="dv">4</span> <span class="sc">&amp;</span> PARTYID<span class="sc">!=</span> <span class="dv">5</span> <span class="sc">&amp;</span> PARTYID<span class="sc">!=</span> <span class="dv">9</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>Data <span class="ot">&lt;-</span> <span class="fu">subset</span>(Data, ATTEND<span class="sc">!=</span> <span class="dv">9</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>Data <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">RACECEN1 =</span> <span class="fu">case_when</span>(RACECEN1 <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">16</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">3</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">4</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">6</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">7</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">8</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">9</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span> <span class="dv">10</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">11</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">12</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">13</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">14</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>                            RACECEN1 <span class="sc">==</span><span class="dv">15</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>                            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">99</span>)) <span class="ot">-&gt;</span> Data</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>Data <span class="ot">&lt;-</span> <span class="fu">subset</span>(Data, RACECEN1<span class="sc">!=</span> <span class="dv">99</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>Data<span class="sc">$</span>PARTYID <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Data<span class="sc">$</span>PARTYID)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>Data<span class="sc">$</span>RACECEN1 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Data<span class="sc">$</span>RACECEN1)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>Data<span class="sc">$</span>RACECEN1 <span class="ot">&lt;-</span> <span class="fu">recode_factor</span>(Data<span class="sc">$</span>RACECEN1, <span class="st">'1'</span> <span class="ot">=</span> <span class="st">"White"</span>, <span class="st">'2'</span> <span class="ot">=</span> <span class="st">"Black"</span>, <span class="st">'3'</span> <span class="ot">=</span> <span class="st">"Hispanic"</span>, <span class="st">'4'</span> <span class="ot">=</span> <span class="st">"Other"</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>Data<span class="sc">$</span>PARTYID <span class="ot">&lt;-</span> <span class="fu">recode_factor</span>(Data<span class="sc">$</span>PARTYID, <span class="st">'0'</span> <span class="ot">=</span> <span class="st">"Democratic"</span>, <span class="st">'6'</span> <span class="ot">=</span> <span class="st">"Republican"</span>, <span class="st">'7'</span> <span class="ot">=</span> <span class="st">"Other"</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [797 × 3] (S3: tbl_df/tbl/data.frame)
 $ ATTEND  : num [1:797] 6 0 5 3 6 8 5 2 8 0 ...
 $ PARTYID : Factor w/ 3 levels "Democratic","Republican",..: 1 2 1 2 1 1 1 1 1 1 ...
 $ RACECEN1: Factor w/ 4 levels "White","Black",..: 2 1 2 1 2 3 2 1 1 1 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  ATTEND PARTYID    RACECEN1
   &lt;dbl&gt; &lt;fct&gt;      &lt;fct&gt;   
1      6 Democratic Black   
2      0 Republican White   
3      5 Democratic Black   
4      3 Republican White   
5      6 Democratic Black   
6      8 Democratic Hispanic</code></pre>
</div>
</div>
<p>The original “Religion Data 2” has several values in each factor that we do not want to look at (either coded as missing or an ambiguous code like “independent but more democratic”). I was also asked to look at Black, White, Hispanic individuals as compared to the rest of the participants so I needed to write code that recoded the race variable into something more meaningful (there is originally 16 levels in this variable - some with just single digit cell sizes). I also wanted to assign labels to each level of the factor to aid in clarity.</p>
<p>Now, let’s build a two-way ANOVA model and look at the output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Aov <span class="ot">&lt;-</span> <span class="fu">aov</span>(ATTEND <span class="sc">~</span> RACECEN1<span class="sc">*</span>PARTYID, Data)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Aov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  Df Sum Sq Mean Sq F value   Pr(&gt;F)    
RACECEN1           3    228   76.12  10.384 1.05e-06 ***
PARTYID            2    392  195.88  26.721 5.93e-12 ***
RACECEN1:PARTYID   6     91   15.14   2.066    0.055 .  
Residuals        785   5754    7.33                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<section id="solution-1" class="level2 text-center">
<h2 class="anchored" data-anchor-id="solution-1"><strong>Solution 1</strong></h2>
</section>
<p>Results of the two-way ANOVA indicate both a significant main effect for race, F(3,785) = 10.38, p &lt;.001, and for political party, F(2,785) = 26.721, p&lt;.001, and also a marginally significant interaction, F(6,785) = 2.07, p = .06. For the sake of this client’s project, I am going to determine that the marginal p value is close enough to our arbitrary alpha level so I will go ahead and look at the simple effects.</p>
<p>First, I want to get the condition means and the cell means.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emmeans)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>Condition_Means <span class="ot">&lt;-</span> <span class="fu">emmeans</span>(Aov, <span class="sc">~</span> RACECEN1<span class="sc">*</span>PARTYID)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>Condition_Means</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> RACECEN1 PARTYID    emmean    SE  df lower.CL upper.CL
 White    Democratic   2.75 0.172 785    2.417     3.09
 Black    Democratic   4.88 0.212 785    4.461     5.29
 Hispanic Democratic   4.59 0.577 785    3.458     5.72
 Other    Democratic   3.44 0.541 785    2.377     4.50
 White    Republican   4.44 0.173 785    4.104     4.78
 Black    Republican   4.83 0.782 785    3.299     6.37
 Hispanic Republican   5.00 1.910 785    1.242     8.76
 Other    Republican   4.44 0.902 785    2.673     6.22
 White    Other        2.60 0.365 785    1.883     3.32
 Black    Other        2.50 0.957 785    0.621     4.38
 Hispanic Other        1.33 1.560 785   -1.735     4.40
 Other    Other        4.50 1.350 785    1.843     7.16

Confidence level used: 0.95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Marginal_MeansRace <span class="ot">&lt;-</span> <span class="fu">emmeans</span>(Aov, <span class="sc">~</span> RACECEN1)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>Marginal_MeansRace</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> RACECEN1 emmean    SE  df lower.CL upper.CL
 White      3.27 0.146 785     2.98     3.55
 Black      4.07 0.418 785     3.25     4.89
 Hispanic   3.64 0.846 785     1.98     5.30
 Other      4.13 0.572 785     3.01     5.25

Results are averaged over the levels of: PARTYID 
Confidence level used: 0.95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Marginal_MeansParty <span class="ot">&lt;-</span> <span class="fu">emmeans</span>(Aov, <span class="sc">~</span> PARTYID)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>Marginal_MeansParty</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> PARTYID    emmean    SE  df lower.CL upper.CL
 Democratic   3.92 0.209 785     3.50     4.33
 Republican   4.68 0.566 785     3.57     5.79
 Other        2.73 0.577 785     1.60     3.87

Results are averaged over the levels of: RACECEN1 
Confidence level used: 0.95 </code></pre>
</div>
</div>
<p>You can also get these means using the dplyr. However, you have to be cautious on the marginal mean calculation which is why I used the emmeans function.</p>
<p>Now that I found a significant interaction, I want to look at the simple effects. In other words, I want to look at the relationship between one predictor on the DV, across all levels of the other predictor. The testinteractions function in the phia package allows me to do this. Note that I have to convert the aov model to a lm model to fit the first argument of this function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(phia)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>LM <span class="ot">&lt;-</span> <span class="fu">lm</span>(ATTEND <span class="sc">~</span> RACECEN1<span class="sc">*</span>PARTYID, Data)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>Test1 <span class="ot">&lt;-</span> <span class="fu">testInteractions</span>(LM, <span class="at">fixed =</span> <span class="st">"RACECEN1"</span>, <span class="at">across =</span> <span class="st">"PARTYID"</span>, <span class="at">adjustment =</span> <span class="st">"bonferroni"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>Test1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>F Test: 
P-value adjustment method: bonferroni
          PARTYID1 PARTYID2    SE1    SE2 Df Sum of Sq       F    Pr(&gt;F)    
   White    0.1540   1.8431   0.40    0.4  2    401.34 27.3745 1.287e-11 ***
   Black    2.3773   2.3333   0.98    1.2  2     43.15  2.9430    0.2132    
Hispanic    3.2576   3.6667   1.67    2.5  2     29.20  1.9917    0.5486    
   Other   -1.0600  -0.0556   1.46    1.6  2      8.93  0.6093    1.0000    
Residuals                   785.00 5754.5                                   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Test2 <span class="ot">&lt;-</span> <span class="fu">testInteractions</span>(LM, <span class="at">fixed =</span> <span class="st">"PARTYID"</span>, <span class="at">across =</span> <span class="st">"RACECEN1"</span>, <span class="at">adjustment =</span> <span class="st">"bonferroni"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>Test2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>F Test: 
P-value adjustment method: bonferroni
           RACECEN11 RACECEN12 RACECEN13    SE1    SE2     SE3 Df Sum of Sq
Democratic  -0.68597   1.43730    1.1509   0.57    0.6 0.79147  3    465.09
Republican  -0.00136   0.38889    0.5556   0.92    1.2 2.11655  3      2.32
     Other  -1.90000  -2.00000   -3.1667   1.40    1.7 2.06789  3     19.20
Residuals                                785.00 5754.5                     
                 F    Pr(&gt;F)    
Democratic 21.1483 1.052e-12 ***
Republican  0.1056         1    
     Other  0.8733         1    
Residuals                       
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>Results indicate that the effect of political party within White individuals is significant, F(2,785) = 27.38, p &lt;.001. Results also indicate that the effect of race within Democratic individuals is significant, F(3,785) = 21.15, p &lt;.001. Since I found several significant simple effects, I can now follow it up with a simple effects comparison. This is a pairwise comparison of cell means, similar to post-hocs from a one-way ANOVA. I need to break down the multiple degree of freedom effects into single degree of freedom tests so that I know exactly where the difference lies for each effect.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>Simple <span class="ot">&lt;-</span> <span class="fu">testInteractions</span>(LM, <span class="at">pairwise =</span> <span class="st">"RACECEN1"</span>, <span class="at">fixed =</span> <span class="st">"PARTYID"</span>, <span class="at">adjustment =</span> <span class="st">"bonferroni"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>Simple</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>F Test: 
P-value adjustment method: bonferroni
                              Value     SE     Df Sum of Sq       F    Pr(&gt;F)
   White-Black : Democratic -2.1233   0.27    1.0    443.41 60.4882 4.189e-13
White-Hispanic : Democratic -1.8369   0.60    1.0     68.18  9.3011   0.04261
   White-Other : Democratic -0.6860   0.57    1.0     10.69  1.4578   1.00000
Black-Hispanic : Democratic  0.2864   0.61    1.0      1.59  0.2169   1.00000
   Black-Other : Democratic  1.4373   0.58    1.0     44.78  6.1084   0.24597
Hispanic-Other : Democratic  1.1509   0.79    1.0     15.50  2.1145   1.00000
   White-Black : Republican -0.3902   0.80    1.0      1.74  0.2377   1.00000
White-Hispanic : Republican -0.5569   1.92    1.0      0.62  0.0839   1.00000
   White-Other : Republican -0.0014   0.92    1.0      0.00  0.0000   1.00000
Black-Hispanic : Republican -0.1667   2.07    1.0      0.05  0.0065   1.00000
   Black-Other : Republican  0.3889   1.19    1.0      0.78  0.1061   1.00000
Hispanic-Other : Republican  0.5556   2.12    1.0      0.51  0.0689   1.00000
   White-Black :      Other  0.1000   1.02    1.0      0.07  0.0095   1.00000
White-Hispanic :      Other  1.2667   1.61    1.0      4.56  0.6227   1.00000
   White-Other :      Other -1.9000   1.40    1.0     13.46  1.8363   1.00000
Black-Hispanic :      Other  1.1667   1.83    1.0      2.97  0.4051   1.00000
   Black-Other :      Other -2.0000   1.66    1.0     10.67  1.4551   1.00000
Hispanic-Other :      Other -3.1667   2.07    1.0     17.19  2.3450   1.00000
Residuals                           785.00 5754.5                            
                               
   White-Black : Democratic ***
White-Hispanic : Democratic *  
   White-Other : Democratic    
Black-Hispanic : Democratic    
   Black-Other : Democratic    
Hispanic-Other : Democratic    
   White-Black : Republican    
White-Hispanic : Republican    
   White-Other : Republican    
Black-Hispanic : Republican    
   Black-Other : Republican    
Hispanic-Other : Republican    
   White-Black :      Other    
White-Hispanic :      Other    
   White-Other :      Other    
Black-Hispanic :      Other    
   Black-Other :      Other    
Hispanic-Other :      Other    
Residuals                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>Looking at the simple effects comparison test output, several results are significant. Specifically, the White-Black difference in religious attendance scores for democrats is significant, F(1, 785) = 60.49, p &lt;.001. Since the value is negative, I know that the mean of Black individuals is larger than the mean of White individuals. Sure enough, the mean religious attendance for White democrats (M = 2.75) is significantly smaller than the mean religious attendance for Black democrats (M = 4.88). Additionally, the White-Hispanic difference for religious attendance for democrats is significant, F(1,785) = 9.30, p = .04. The effect is also negative, so I know the mean for Hispanic democrats is larger. Indeed, the mean religious attendance scores for White democrats (M = 2.75) is smaller than the mean religious attendance scores for Hispanic democrats (M = 4.59). I can also look at more pairwise comparisons (the mean of republican Whites vs.&nbsp;Other Hispanics) - but this requires additional codes and considerations.</p>
<section id="solution-2" class="level2 text-center">
<h2 class="anchored" data-anchor-id="solution-2"><strong>Solution 2</strong></h2>
</section>
<p>I can also look at interactions by contrast coding for each effect in both main effects and their interactions. This is especially applicable since both main effects and the interaction are significant (while marginal). Since there is a total of 12 groups (3X4 design) I need 11 contrast coded predictors. Race has 4 levels so it needs 3 contrast coded predictors and political party has 3 levels so it needs 2 contrast coded predictors. Then each effect will be crossed, resulting in 5 interaction contrast coded predictors (3 + 2 + 5 = 11). Contrast codes that are assigned to each predictor have to satisfy two conditions to be orthogonal: sum across each group equal zero and the sum of the product of all pairs equal zero (<a href="https://sites.google.com/view/dataanalysisbook">Data Analysis: A Model Comparison Approach to Regression, ANOVA, and Beyond by Judd, McClelland, &amp; Ryan, 2017</a> provides excellent background on the necessity and development of contrast coding for those curious).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Data<span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">x1 =</span> <span class="fu">case_when</span>(RACECEN1 <span class="sc">==</span><span class="st">"White"</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">3</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span><span class="st">"Black"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span><span class="st">"Hispanic"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">99</span>),</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="at">x2 =</span> <span class="fu">case_when</span>(RACECEN1 <span class="sc">==</span><span class="st">"White"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span><span class="st">"Black"</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span><span class="st">"Hispanic"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">99</span>),</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="at">x3 =</span> <span class="fu">case_when</span>(RACECEN1 <span class="sc">==</span> <span class="st">"White"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span> <span class="st">"Black"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span> <span class="st">"Hispanic"</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>                      RACECEN1 <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>                      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">99</span>),</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="at">x4 =</span> <span class="fu">case_when</span>(PARTYID <span class="sc">==</span> <span class="st">"Democratic"</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">2</span>,</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>                      PARTYID <span class="sc">==</span> <span class="st">"Republican"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>                      PARTYID <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>                      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">99</span>),</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="at">x5 =</span> <span class="fu">case_when</span>(PARTYID <span class="sc">==</span> <span class="st">"Democratic"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>                      PARTYID <span class="sc">==</span> <span class="st">"Republican"</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>                      PARTYID <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>                      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">99</span>),</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="at">x6 =</span> x1 <span class="sc">*</span> x4,</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="at">x7 =</span> x1 <span class="sc">*</span> x5,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="at">x8 =</span> x2 <span class="sc">*</span> x4,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="at">x9 =</span> x2 <span class="sc">*</span> x5,</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="at">x10 =</span> x3 <span class="sc">*</span> x4,</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="at">x11 =</span> x3 <span class="sc">*</span> x5) <span class="ot">-&gt;</span> Data</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>Aov2 <span class="ot">&lt;-</span> <span class="fu">aov</span>(ATTEND <span class="sc">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3 <span class="sc">+</span> x4 <span class="sc">+</span> x5 <span class="sc">+</span> x6 <span class="sc">+</span> x7 <span class="sc">+</span> x8 <span class="sc">+</span> x9 <span class="sc">+</span> x10 <span class="sc">+</span> x11, Data)</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Aov2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Df Sum Sq Mean Sq F value   Pr(&gt;F)    
x1            1    195  195.24  26.634 3.12e-07 ***
x2            1     30   29.62   4.041  0.04475 *  
x3            1      3    3.48   0.475  0.49080    
x4            1    169  169.40  23.109 1.83e-06 ***
x5            1    222  222.36  30.333 4.93e-08 ***
x6            1     53   52.62   7.179  0.00753 ** 
x7            1      0    0.11   0.015  0.90155    
x8            1      9    8.87   1.209  0.27180    
x9            1      1    1.38   0.188  0.66474    
x10           1     16   16.28   2.220  0.13660    
x11           1     12   11.60   1.582  0.20880    
Residuals   785   5754    7.33                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>Need to be clear on what each contrast coded predictor codes for:</p>
<p>x1: difference between White and the average of Black, Hispanic, and other races, across political party</p>
<p>x2: difference between Black and the average of Hispanic and other races, across political party</p>
<p>x3: difference between Hispanic and other races, across political party</p>
<p>x4: difference between democratic and the average of republican and other, across race</p>
<p>x5: difference between republican and other, across race</p>
<p>x6-x11: the interaction of the above contrasts</p>
<p>I won’t interpret all effects that are significant, but let’s look at a few. x1 codes the difference between White individuals and the average of Black, Hispanic, and other races. This effect is significant, F(1,785) = 26.63, p &lt;.001. Since I am comparing White individuals to the average of all other groups across political party, I need to average together some means. The marginal mean for White individuals is 3.27, now we need to get the means for the other racial groups. The average of the other 9 conditions (Black/Hispanic/Other for all 3 political parties) is 3.95 (this is also the mean of the three marginal means of race not including White). So then, x1 is coding the difference between 3.27 and 3.95, which is significant, providing evidence that White individuals attended religious institutions significantly less than the three other racial groups.</p>
<p>x2 codes the difference between democrats and the average of both republicans and others, across race. Looking at marginal means, this effect is coding the difference between a mean of 3.92 for democrats, and a mean of 3.71 for both republicans and others. This effect is significant, suggesting that democrats attended religious institutions significantly more than both republicans and others, F(1,785) = 23.11, p &lt;.001.</p>
<p>x6 codes if the difference between White and the average of Black, Hispanic, and other races and for the difference between democrats and the average of republicans and others. The difference for democrats can be found by getting the difference between mean of White dems and the average of the three other racial groups = this difference is -1.55. This value is being compared to a difference between mean of White republican and other and the average of Black, Hispanic, and other individuals in both republic and other groups - this value is -.25. In other words, Whites were less likely to go to religious attendance than the three other racial groups, and this is more true for White democrats, as compared to White republicans and others.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = true;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/matthew-swanson\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025, Matthew Swanson. This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://quarto.org">
<p>Made with Quarto</p>
</a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/MattS002">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/matthew-swanson-phd-335942137">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>