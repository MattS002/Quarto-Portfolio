{"title":"Testing for Quadratic Effects in Multilevel Meta-Analysis","markdown":{"yaml":{"title":"Testing for Quadratic Effects in Multilevel Meta-Analysis","editor":"visual","author":"Matthew Swanson","categories":["Multilevel Meta-Analysis","R","Quadratic Effects","Organizational Training","Engagement","Data Science"],"warning":false,"message":false,"format":{"html":{"page-layout":"full"}}},"headingText":"**Project Goal**","containsRefs":false,"markdown":"\n\n::: text-center\n:::\n\nAs described in the overall goal of [this project](/Portfolio%20pages/MLMAEffect.qmd), the hospital is interested in understanding what the effect they could reasonably expect to have when implementing a new teamwork training course into their workforce. Using data from previously published literature, 30 studies were identified across ten research papers. Each of these studies evaluated participant teamwork skills prior to the implementation of the training, right after the training, and several months later. I have previously demonstrated how to find the overall effect for a comparison of pre to post scores and the overall effect comparing pre to follow-up scores. However, what about a model that considers the three time points in each study? It is reasonable to expect that teamwork scores will increase right after training (as compared to pre scores) and then plateau or even weaken over time (but still remain significantly greater than pre scores). To test for this, we will have to change the shape of the data a bit and add in a quadratic term. First, I will load in the data.\n\n```{r, echo=-7}\nlibrary(readxl)\nlibrary(dplyr)\nlibrary(ez)\nlibrary(tidyr)\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(metafor)\n\nQuadData <- read_excel(\"C:/Users/matts/OneDrive/Desktop/MLMA Quad Data.xlsx\")\nhead(QuadData)\n```\n\n## Hedges' *g*\n\nFor the sake of this example, I am going to recalculate Hedges' *g* for each of these comparisons in order to demonstrate again how to calculate meta-analytic effects using a dataset that has a slightly different set up than I have shown previously. I will also need to create the quadratic term by multiplying the number of months since the post test by itself.\n\n```{r}\n# set correlation = .5\nri <- .5\nQuadData$ri <- ri\n\n#compute effect size  for pre vs. post\nQuadDataPP <- escalc(measure = \"SMCR\", \n         m1i= Mean_pre, \n         m2i = Mean_post,\n         sd1i = SD1, \n         sd2i = SD2, \n         ni = N,\n        ri = ri,\n        flip = TRUE,\n        data = QuadData)\n\n#compute effect size  for pre vs. follow\nQuadDataPF <- escalc(measure = \"SMCR\", \n         m1i= Mean_pre, \n         m2i = Mean_follow,\n         sd1i = SD1, \n         sd2i = SD3, \n         ni = N,\n        ri = ri,\n        flip = TRUE,\n        data = QuadData)\n\nQuadFull <- merge(QuadDataPP, QuadDataPF, by = c('Study_ID', 'Effect_ID'), all.x = TRUE)\nQuadFull <- unite(QuadFull, yi, c(yi.x, yi.y), na.rm = TRUE)\nQuadFull <- unite(QuadFull, vi, c(vi.x, vi.y), na.rm = TRUE)\nQuadFull <- unite(QuadFull, N, c(N.x), na.rm = TRUE)\nQuadFull <- unite(QuadFull, Months_since_post, c(Months_since_post.x), na.rm = TRUE)\n\nQuadFull <- QuadFull %>%\n  mutate_at(c('yi', 'vi', 'N', 'Months_since_post'), as.numeric)\n\n#Create quadratic term\nQuadFull <- QuadFull %>%\n  mutate(Quad_Term = Months_since_post * Months_since_post)\n\nQuadFull <- QuadFull |> mutate(df = N - 1)\n\n\n#compute standard error for Cohen's d using sampling variance\nQuadFull <- QuadFull |> mutate(std_error_d = sqrt(vi / N))\n\n#convert Cohen's d to Hedges' g: effect size & standard error & variance\n\n##correction factor J\nQuadFull <- QuadFull |> mutate(j =  1 - (3 / (4 * df - 1)))\n\n##Hedges' g: effect size\nQuadFull <- QuadFull |> mutate(hedges_g =  yi * j)\n##Hedges' g: std error\nQuadFull <- QuadFull |> mutate(std_error_g =  std_error_d * j)\n#Hedges' g: variance \nQuadFull <- QuadFull |>  mutate(var_g = vi * j) \nhead(QuadFull)\n```\n\n## Plotting Linear and Quadratic Trends\n\nI calculated Hedges' *g* for each comparison of interest and ensured that each value is read into a single dataset by using the unite function. Of course I could clean this dataset further by removing more of the duplicate columns of data that are created by combining two data frames, but for now I will move on and build a MLMA model that includes the quadratic term. The I will also plot this model.\n\n```{r}\n# | warning: false\n#Creating MLMA Quad Model\n\nMLMAQuad <- rma.mv(yi = hedges_g, \n                        V = var_g,\n                        mods = ~ Months_since_post + Quad_Term,\n                        random = ~ 1 | Study_ID/Effect_ID, \n                        data = QuadFull)\nMLMAQuad\n\n#figure\nggplot(QuadFull, aes(x=Months_since_post, y=hedges_g)) + \n  geom_point(aes(size = N), color=\"black\", shape=21, stroke =1.5, fill=\"white\")+\n  geom_smooth(show.legend= F, color=\"#40B0A6\", method = \"lm\", formula = y~x, fill = \"#40B0A6\")+\n  geom_smooth(show.legend= F, color=\"#E1BE6A\", method = \"lm\", formula = y~poly(x,2), fill = \"#E1BE6A\")+\n  geom_hline(yintercept = 0, color = \"black\", linetype=2)+\n  coord_cartesian((xlim = c(0, 12))) +\n  theme_classic() +\n  labs(y=\"Standardized Mean Difference\", x=\"Months Since Post-Test\") +\n  theme(legend.position = \"none\",\n        axis.title.x = element_text(margin = unit(c(5, 0, 0, 0), \"mm\")),\n        axis.title.y = element_text(margin = unit(c(0, 5, 0, 0), \"mm\")),\n        axis.text.x=element_text(colour=\"black\"),\n        axis.text.y=element_text(colour=\"black\")) \n```\n\nResults of this analysis indicates that there was no significant linear (*p* = .070) or quadratic effect (*p* = .061) of training over time. In other words, the significant improvement in training outcomes from pre to post assessment time points (as standardized mean difference) did not continue to improve over time, nor did post and follow-up time points differ from each other (when compared to pre training scores) as the quadratic trend line was not significant.\n","srcMarkdownNoYaml":"\n\n::: text-center\n# **Project Goal**\n:::\n\nAs described in the overall goal of [this project](/Portfolio%20pages/MLMAEffect.qmd), the hospital is interested in understanding what the effect they could reasonably expect to have when implementing a new teamwork training course into their workforce. Using data from previously published literature, 30 studies were identified across ten research papers. Each of these studies evaluated participant teamwork skills prior to the implementation of the training, right after the training, and several months later. I have previously demonstrated how to find the overall effect for a comparison of pre to post scores and the overall effect comparing pre to follow-up scores. However, what about a model that considers the three time points in each study? It is reasonable to expect that teamwork scores will increase right after training (as compared to pre scores) and then plateau or even weaken over time (but still remain significantly greater than pre scores). To test for this, we will have to change the shape of the data a bit and add in a quadratic term. First, I will load in the data.\n\n```{r, echo=-7}\nlibrary(readxl)\nlibrary(dplyr)\nlibrary(ez)\nlibrary(tidyr)\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(metafor)\n\nQuadData <- read_excel(\"C:/Users/matts/OneDrive/Desktop/MLMA Quad Data.xlsx\")\nhead(QuadData)\n```\n\n## Hedges' *g*\n\nFor the sake of this example, I am going to recalculate Hedges' *g* for each of these comparisons in order to demonstrate again how to calculate meta-analytic effects using a dataset that has a slightly different set up than I have shown previously. I will also need to create the quadratic term by multiplying the number of months since the post test by itself.\n\n```{r}\n# set correlation = .5\nri <- .5\nQuadData$ri <- ri\n\n#compute effect size  for pre vs. post\nQuadDataPP <- escalc(measure = \"SMCR\", \n         m1i= Mean_pre, \n         m2i = Mean_post,\n         sd1i = SD1, \n         sd2i = SD2, \n         ni = N,\n        ri = ri,\n        flip = TRUE,\n        data = QuadData)\n\n#compute effect size  for pre vs. follow\nQuadDataPF <- escalc(measure = \"SMCR\", \n         m1i= Mean_pre, \n         m2i = Mean_follow,\n         sd1i = SD1, \n         sd2i = SD3, \n         ni = N,\n        ri = ri,\n        flip = TRUE,\n        data = QuadData)\n\nQuadFull <- merge(QuadDataPP, QuadDataPF, by = c('Study_ID', 'Effect_ID'), all.x = TRUE)\nQuadFull <- unite(QuadFull, yi, c(yi.x, yi.y), na.rm = TRUE)\nQuadFull <- unite(QuadFull, vi, c(vi.x, vi.y), na.rm = TRUE)\nQuadFull <- unite(QuadFull, N, c(N.x), na.rm = TRUE)\nQuadFull <- unite(QuadFull, Months_since_post, c(Months_since_post.x), na.rm = TRUE)\n\nQuadFull <- QuadFull %>%\n  mutate_at(c('yi', 'vi', 'N', 'Months_since_post'), as.numeric)\n\n#Create quadratic term\nQuadFull <- QuadFull %>%\n  mutate(Quad_Term = Months_since_post * Months_since_post)\n\nQuadFull <- QuadFull |> mutate(df = N - 1)\n\n\n#compute standard error for Cohen's d using sampling variance\nQuadFull <- QuadFull |> mutate(std_error_d = sqrt(vi / N))\n\n#convert Cohen's d to Hedges' g: effect size & standard error & variance\n\n##correction factor J\nQuadFull <- QuadFull |> mutate(j =  1 - (3 / (4 * df - 1)))\n\n##Hedges' g: effect size\nQuadFull <- QuadFull |> mutate(hedges_g =  yi * j)\n##Hedges' g: std error\nQuadFull <- QuadFull |> mutate(std_error_g =  std_error_d * j)\n#Hedges' g: variance \nQuadFull <- QuadFull |>  mutate(var_g = vi * j) \nhead(QuadFull)\n```\n\n## Plotting Linear and Quadratic Trends\n\nI calculated Hedges' *g* for each comparison of interest and ensured that each value is read into a single dataset by using the unite function. Of course I could clean this dataset further by removing more of the duplicate columns of data that are created by combining two data frames, but for now I will move on and build a MLMA model that includes the quadratic term. The I will also plot this model.\n\n```{r}\n# | warning: false\n#Creating MLMA Quad Model\n\nMLMAQuad <- rma.mv(yi = hedges_g, \n                        V = var_g,\n                        mods = ~ Months_since_post + Quad_Term,\n                        random = ~ 1 | Study_ID/Effect_ID, \n                        data = QuadFull)\nMLMAQuad\n\n#figure\nggplot(QuadFull, aes(x=Months_since_post, y=hedges_g)) + \n  geom_point(aes(size = N), color=\"black\", shape=21, stroke =1.5, fill=\"white\")+\n  geom_smooth(show.legend= F, color=\"#40B0A6\", method = \"lm\", formula = y~x, fill = \"#40B0A6\")+\n  geom_smooth(show.legend= F, color=\"#E1BE6A\", method = \"lm\", formula = y~poly(x,2), fill = \"#E1BE6A\")+\n  geom_hline(yintercept = 0, color = \"black\", linetype=2)+\n  coord_cartesian((xlim = c(0, 12))) +\n  theme_classic() +\n  labs(y=\"Standardized Mean Difference\", x=\"Months Since Post-Test\") +\n  theme(legend.position = \"none\",\n        axis.title.x = element_text(margin = unit(c(5, 0, 0, 0), \"mm\")),\n        axis.title.y = element_text(margin = unit(c(0, 5, 0, 0), \"mm\")),\n        axis.text.x=element_text(colour=\"black\"),\n        axis.text.y=element_text(colour=\"black\")) \n```\n\nResults of this analysis indicates that there was no significant linear (*p* = .070) or quadratic effect (*p* = .061) of training over time. In other words, the significant improvement in training outcomes from pre to post assessment time points (as standardized mean difference) did not continue to improve over time, nor did post and follow-up time points differ from each other (when compared to pre training scores) as the quadratic trend line was not significant.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"MLMAQuad.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","editor":"visual","theme":{"dark":"Superhero"},"title":"Testing for Quadratic Effects in Multilevel Meta-Analysis","author":"Matthew Swanson","categories":["Multilevel Meta-Analysis","R","Quadratic Effects","Organizational Training","Engagement","Data Science"],"message":false,"page-layout":"full"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}