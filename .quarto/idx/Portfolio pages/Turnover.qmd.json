{"title":"Employee Turnover: A Survival Analysis","markdown":{"yaml":{"title":"Employee Turnover: A Survival Analysis","editor":"visual","author":"Matthew Swanson","categories":["Survival Analysis","Turnover","R","Visualizations","survminer"],"warning":false,"message":false},"headingText":"**Project Goal**","containsRefs":false,"markdown":"\n\n::: text-center\n:::\n\nEmployees choose to leave organizations for many [reasons](https://journals.aom.org/doi/abs/10.5465/amp.2016.0123). Thus, it is sometimes important for Human Resources and People Analytic departments to identify variables that may influence the likelihood that employees will turnover.\n\n::: text-center\n## **About This Data**\n:::\n\nUsing [this](https://www.kaggle.com/datasets/davinwijaya/employee-turnover) real employee dataset shared by Edward Babushkin and housed on Kaggle, I will analyze several factors that influence the likelihood that an employee will leave their company. Also, a big thank you to Keith McNulty, Alex LoPilato, and Liz Romero for their people analytics course on [github](https://github.com/rstudio-conf-2022/people-analytics-rstats).\n\nData columns:\n\n-   stag = job tenure (time in months)\n\n-   event = employee turnover event\n\n-   gender = employee's gender\n\n-   age = employee's age\n\n-   industry = employee's industry\n\n-   profession = employee's profession\n\n-   traffic = from what pipeline an employee came to the company\n\n-   coach = presence of training coach\n\n-   head_gender = supervisor gender\n\n-   greywage = wage type (taxed or not)\n\n-   way = employee's mode of transportation\n\n-   extraversion = extraversion score\n\n-   independ = agreeableness score\n\n-   selfcontrol = conscientiousness score\n\n-   anxiety = neuroticism score\n\n-   novator = openness score\n\nFirst, I will load in the data and make any necessary corrections.\n\n```{r, echo=-5}\nlibrary(readxl)\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(psych)\nTurnData <- read.csv(\"C:/Users/matts/Desktop/WebsiteData/Data/turnover.csv\")\n\n\n#Need to change string data to factors\nTurnData$event <- factor(TurnData$event, labels = c(\"no\", \"yes\"))\nnames <- c('gender', 'industry', 'profession', 'traffic', 'coach', 'head_gender', 'greywage', 'way')\nTurnData[,names] <- lapply(TurnData[,names], factor)\nTurnData <- TurnData  %>%\n    dplyr::mutate(\n    Coach = dplyr::case_when(\n      coach == \"no\" ~ \"no\",\n      coach == \"yes\" ~ \"yes\",\n      coach == \"my head\" ~ \"no\"))\nTurnData$Coach <- as.factor(TurnData$Coach)\nstr(TurnData)\n```\n\nFactors have been made - now I will look at the descriptives of the data.\n\n```{r}\nlibrary(ggplot2)\nDescriptives <- describe(TurnData)\nDescriptives\nsum(is.na(TurnData))\n```\n\nSince each data point represents an employee who has either left the organization or is currently employed, and there are no missing data points, I will move on to model building and running some analyses on the data.\n\n::: text-center\n# **Survival Analysis**\n:::\n\nFirst, I conducted a survival analysis and related the survival object to several of the variables that were measured during the employee on-boarding period.\n\n```{r}\nlibrary(survival)\nlibrary(survminer)\nlibrary(lubridate)\nlibrary(ggfortify)\n# Create a censor indicator variable that is 1 if the employee has left and 0 otherwise\nTurnData <-\n  TurnData %>%\n    dplyr::mutate(\n    CENSOR = dplyr::case_when(\n      event == \"no\" ~ 0,\n      TRUE ~ 1))\n\n# Create a survival object\nsurv_object <- survival::Surv(\n  event = TurnData$CENSOR,\n  time = TurnData$stag\n)\n\n# Estimate survival probabilities using Kaplan Meier estimator\nSurvProb <- survival::survfit(\n  surv_object ~ 1,\n  data = TurnData)\nhead(fortify(SurvProb),10)\n\nSurvProbcalc <- \n  tibble::tibble(\n    time = SurvProb$time,\n    n.risk = SurvProb$n.risk,\n    n.censor = SurvProb$n.censor,\n    n.event = SurvProb$n.event,\n    survival = SurvProb$surv\n  )\n\nsum(SurvProbcalc$n.event)\nsum(SurvProbcalc$n.censor)\nmin(which(SurvProbcalc$n.censor != 0))\n\n```\n\nFYI: To reduce the length of the printed data, I only asked for the first 10 rows but a row is created until the \"surv\" column reaches zero so this output can become quite long.\n\nThe first item I notice from this output is that turnover occurs at a relatively rapid rate at this company (this interpretation may slightly change if the organization is a massive company - total N size is not accessable). Since the time metric is in months, by the first year, approximately 297 employees (1129 - 832) are predicted to turnover, for a survival percentage of about 85%. Additionally, I would expect only half of the employees to remain at the company about 4 years into the job (approximately 50 months).\n\nI also determined that 571 employees turned over at this company and there are 558 censored observations. These censored observations are participants who have not yet experienced the event of interest in this dataset: turnover. Also, the first censored participant showed up at time point three (about 2 weeks).\n\nNow I will visualize the Kaplan Meier estimator output.\n\n```{r}\nsurvminer::ggsurvplot(\n  SurvProb,\n  pval = TRUE,\n  conf.int = TRUE,\n  risk.table = TRUE,\n  xlab = \"Months since Hire\",\n  ylab = \"Probability of Staying at Company\"\n)\n```\n\nConsidering no other explanatory variables, results of my survival analysis predicts that most employees will turnover about 175 months (14.5 years) into their tenure at the company. However, perhaps additional variables, such a the presence of a coach and commuting style better explain the tenure trajectory of employees at this company.\n\n```{r}\nSurvProb_Coach <- survival::survfit(surv_object ~ Coach, data = TurnData)\nhead(fortify(SurvProb_Coach), 10)\n```\n\nAt a quick glance, it appears that the presence of a coach speeds up the attrition rate at this company! Perhaps the company should investigate the coaches they have employed to work with their staff as employees have a lower survival rate when paired with a coach than those who do not have a coach. [**However**]{.underline}, I want a statistical test to tell the difference between these two survival curves. I will now visualize these survival rates and ask for a test of the difference in survival curves.\n\n```{r}\nsurvminer::ggsurvplot(\n  SurvProb_Coach,\n  pval = TRUE,\n  conf.int = TRUE,\n  xlab = \"Months since Hire\",\n  ylab = \"Probability of Staying at Company\"\n)\n```\n\nAs is made more clear by this graph, the survival curves for those who had and did not have a coach did not significantly differ from each other, log-likelihood p = .27. I am also curious how commuting style (if the employee commuted by way of a bus, car, or by foot) impacted attrition and if commuting style interacted with coaching. First, I will change my model to include commuting style and will plot the model.\n\n```{r}\nSurvProb_Way <- survival::survfit(surv_object ~ way, data = TurnData)\n#summary(SurvProb_Sup)\nsurvminer::ggsurvplot(\n  SurvProb_Way,\n  pval = TRUE,\n  conf.int = TRUE,\n  xlab = \"Months since Hire\",\n  ylab = \"Probability of Staying at Company\"\n)\n```\n\nResults indicate that commuting style did significantly change the attrition estimate for employees. Since there are more than two curves, this only tells me that at least one of the curves differs from the others, but not which curves those are. I will come back to this issue in a moment.\n\nNow I want to see how the occurrence of coaching potentially interacts with commuting style in predicting attrition rates.\n\n```{r}\nIntModel <- survival::survfit(surv_object ~ Coach + way, data = TurnData)\nsurvminer::ggsurvplot(IntModel, \n  pval = TRUE,\n  xlab = \"Months since Hire\",\n  ylab = \"Probability of Staying at Company\")\n```\n\nNote here the significant log-likelihood p value. I also removed the shading for confidence intervals to aid in readability. To really understand the group differences in survivability, the Cox-Proportional Hazards Model, a semi-parametric regression model, will be utilized. I also decided to add in participant's conscientiousness scores to the model.\n\n```{r}\nCoxMod <- survival::coxph(\n  surv_object ~  Coach + way + selfcontrol + Coach*way,\n  data = TurnData)\nsummary(CoxMod)\n```\n\n::: text-center\n# **Conclusion**\n:::\n\nResults indicate that coaching style did not significantly interact with commuting type, all *ps*\\>.05, nor was there any group difference for participants who had a coach vs. those who did not, *b* = 0.20, *p* = .19. However, the difference between riding the bus to work and commuting by either car, *b* = -0.22, *p* = .03, or by foot, *b* = -0.43, *p* = .02, were significant and negative. This suggests that when compared to riding the bus, driving to work reduces the hazard (of attrition) by a factor of .80 and walking to work reduces the hazard by .65. Self-control was also a significant predictor, such that every unit increase in conscientiousness reduces the hazard by a factor of .94.\n\nIt is my recommendation that the company evaluates the utility of their coaching program, as employees are no less likely to leave the company when they have a coach, compared to those who do not have coaches. Conscientious and commuting style stand out as significant predictors of the survival curves. Thus, it may be advantageous to the company to consider adding conscientiousness personality tests to their selection battery (when it makes sense with established job analyses), as more conscientious employees left the company at slower rates. Also, the company may want to encourage carpooling and reduce barriers to walking to work (e.g., keeping sidewalks clean; providing flexible start times so that employees have ample time to walk to work where applicable; etc.).\n","srcMarkdownNoYaml":"\n\n::: text-center\n# **Project Goal**\n:::\n\nEmployees choose to leave organizations for many [reasons](https://journals.aom.org/doi/abs/10.5465/amp.2016.0123). Thus, it is sometimes important for Human Resources and People Analytic departments to identify variables that may influence the likelihood that employees will turnover.\n\n::: text-center\n## **About This Data**\n:::\n\nUsing [this](https://www.kaggle.com/datasets/davinwijaya/employee-turnover) real employee dataset shared by Edward Babushkin and housed on Kaggle, I will analyze several factors that influence the likelihood that an employee will leave their company. Also, a big thank you to Keith McNulty, Alex LoPilato, and Liz Romero for their people analytics course on [github](https://github.com/rstudio-conf-2022/people-analytics-rstats).\n\nData columns:\n\n-   stag = job tenure (time in months)\n\n-   event = employee turnover event\n\n-   gender = employee's gender\n\n-   age = employee's age\n\n-   industry = employee's industry\n\n-   profession = employee's profession\n\n-   traffic = from what pipeline an employee came to the company\n\n-   coach = presence of training coach\n\n-   head_gender = supervisor gender\n\n-   greywage = wage type (taxed or not)\n\n-   way = employee's mode of transportation\n\n-   extraversion = extraversion score\n\n-   independ = agreeableness score\n\n-   selfcontrol = conscientiousness score\n\n-   anxiety = neuroticism score\n\n-   novator = openness score\n\nFirst, I will load in the data and make any necessary corrections.\n\n```{r, echo=-5}\nlibrary(readxl)\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(psych)\nTurnData <- read.csv(\"C:/Users/matts/Desktop/WebsiteData/Data/turnover.csv\")\n\n\n#Need to change string data to factors\nTurnData$event <- factor(TurnData$event, labels = c(\"no\", \"yes\"))\nnames <- c('gender', 'industry', 'profession', 'traffic', 'coach', 'head_gender', 'greywage', 'way')\nTurnData[,names] <- lapply(TurnData[,names], factor)\nTurnData <- TurnData  %>%\n    dplyr::mutate(\n    Coach = dplyr::case_when(\n      coach == \"no\" ~ \"no\",\n      coach == \"yes\" ~ \"yes\",\n      coach == \"my head\" ~ \"no\"))\nTurnData$Coach <- as.factor(TurnData$Coach)\nstr(TurnData)\n```\n\nFactors have been made - now I will look at the descriptives of the data.\n\n```{r}\nlibrary(ggplot2)\nDescriptives <- describe(TurnData)\nDescriptives\nsum(is.na(TurnData))\n```\n\nSince each data point represents an employee who has either left the organization or is currently employed, and there are no missing data points, I will move on to model building and running some analyses on the data.\n\n::: text-center\n# **Survival Analysis**\n:::\n\nFirst, I conducted a survival analysis and related the survival object to several of the variables that were measured during the employee on-boarding period.\n\n```{r}\nlibrary(survival)\nlibrary(survminer)\nlibrary(lubridate)\nlibrary(ggfortify)\n# Create a censor indicator variable that is 1 if the employee has left and 0 otherwise\nTurnData <-\n  TurnData %>%\n    dplyr::mutate(\n    CENSOR = dplyr::case_when(\n      event == \"no\" ~ 0,\n      TRUE ~ 1))\n\n# Create a survival object\nsurv_object <- survival::Surv(\n  event = TurnData$CENSOR,\n  time = TurnData$stag\n)\n\n# Estimate survival probabilities using Kaplan Meier estimator\nSurvProb <- survival::survfit(\n  surv_object ~ 1,\n  data = TurnData)\nhead(fortify(SurvProb),10)\n\nSurvProbcalc <- \n  tibble::tibble(\n    time = SurvProb$time,\n    n.risk = SurvProb$n.risk,\n    n.censor = SurvProb$n.censor,\n    n.event = SurvProb$n.event,\n    survival = SurvProb$surv\n  )\n\nsum(SurvProbcalc$n.event)\nsum(SurvProbcalc$n.censor)\nmin(which(SurvProbcalc$n.censor != 0))\n\n```\n\nFYI: To reduce the length of the printed data, I only asked for the first 10 rows but a row is created until the \"surv\" column reaches zero so this output can become quite long.\n\nThe first item I notice from this output is that turnover occurs at a relatively rapid rate at this company (this interpretation may slightly change if the organization is a massive company - total N size is not accessable). Since the time metric is in months, by the first year, approximately 297 employees (1129 - 832) are predicted to turnover, for a survival percentage of about 85%. Additionally, I would expect only half of the employees to remain at the company about 4 years into the job (approximately 50 months).\n\nI also determined that 571 employees turned over at this company and there are 558 censored observations. These censored observations are participants who have not yet experienced the event of interest in this dataset: turnover. Also, the first censored participant showed up at time point three (about 2 weeks).\n\nNow I will visualize the Kaplan Meier estimator output.\n\n```{r}\nsurvminer::ggsurvplot(\n  SurvProb,\n  pval = TRUE,\n  conf.int = TRUE,\n  risk.table = TRUE,\n  xlab = \"Months since Hire\",\n  ylab = \"Probability of Staying at Company\"\n)\n```\n\nConsidering no other explanatory variables, results of my survival analysis predicts that most employees will turnover about 175 months (14.5 years) into their tenure at the company. However, perhaps additional variables, such a the presence of a coach and commuting style better explain the tenure trajectory of employees at this company.\n\n```{r}\nSurvProb_Coach <- survival::survfit(surv_object ~ Coach, data = TurnData)\nhead(fortify(SurvProb_Coach), 10)\n```\n\nAt a quick glance, it appears that the presence of a coach speeds up the attrition rate at this company! Perhaps the company should investigate the coaches they have employed to work with their staff as employees have a lower survival rate when paired with a coach than those who do not have a coach. [**However**]{.underline}, I want a statistical test to tell the difference between these two survival curves. I will now visualize these survival rates and ask for a test of the difference in survival curves.\n\n```{r}\nsurvminer::ggsurvplot(\n  SurvProb_Coach,\n  pval = TRUE,\n  conf.int = TRUE,\n  xlab = \"Months since Hire\",\n  ylab = \"Probability of Staying at Company\"\n)\n```\n\nAs is made more clear by this graph, the survival curves for those who had and did not have a coach did not significantly differ from each other, log-likelihood p = .27. I am also curious how commuting style (if the employee commuted by way of a bus, car, or by foot) impacted attrition and if commuting style interacted with coaching. First, I will change my model to include commuting style and will plot the model.\n\n```{r}\nSurvProb_Way <- survival::survfit(surv_object ~ way, data = TurnData)\n#summary(SurvProb_Sup)\nsurvminer::ggsurvplot(\n  SurvProb_Way,\n  pval = TRUE,\n  conf.int = TRUE,\n  xlab = \"Months since Hire\",\n  ylab = \"Probability of Staying at Company\"\n)\n```\n\nResults indicate that commuting style did significantly change the attrition estimate for employees. Since there are more than two curves, this only tells me that at least one of the curves differs from the others, but not which curves those are. I will come back to this issue in a moment.\n\nNow I want to see how the occurrence of coaching potentially interacts with commuting style in predicting attrition rates.\n\n```{r}\nIntModel <- survival::survfit(surv_object ~ Coach + way, data = TurnData)\nsurvminer::ggsurvplot(IntModel, \n  pval = TRUE,\n  xlab = \"Months since Hire\",\n  ylab = \"Probability of Staying at Company\")\n```\n\nNote here the significant log-likelihood p value. I also removed the shading for confidence intervals to aid in readability. To really understand the group differences in survivability, the Cox-Proportional Hazards Model, a semi-parametric regression model, will be utilized. I also decided to add in participant's conscientiousness scores to the model.\n\n```{r}\nCoxMod <- survival::coxph(\n  surv_object ~  Coach + way + selfcontrol + Coach*way,\n  data = TurnData)\nsummary(CoxMod)\n```\n\n::: text-center\n# **Conclusion**\n:::\n\nResults indicate that coaching style did not significantly interact with commuting type, all *ps*\\>.05, nor was there any group difference for participants who had a coach vs. those who did not, *b* = 0.20, *p* = .19. However, the difference between riding the bus to work and commuting by either car, *b* = -0.22, *p* = .03, or by foot, *b* = -0.43, *p* = .02, were significant and negative. This suggests that when compared to riding the bus, driving to work reduces the hazard (of attrition) by a factor of .80 and walking to work reduces the hazard by .65. Self-control was also a significant predictor, such that every unit increase in conscientiousness reduces the hazard by a factor of .94.\n\nIt is my recommendation that the company evaluates the utility of their coaching program, as employees are no less likely to leave the company when they have a coach, compared to those who do not have coaches. Conscientious and commuting style stand out as significant predictors of the survival curves. Thus, it may be advantageous to the company to consider adding conscientiousness personality tests to their selection battery (when it makes sense with established job analyses), as more conscientious employees left the company at slower rates. Also, the company may want to encourage carpooling and reduce barriers to walking to work (e.g., keeping sidewalks clean; providing flexible start times so that employees have ample time to walk to work where applicable; etc.).\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"Turnover.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.333","editor":"visual","theme":{"light":"minty","dark":"solar"},"title":"Employee Turnover: A Survival Analysis","author":"Matthew Swanson","categories":["Survival Analysis","Turnover","R","Visualizations","survminer"],"message":false},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}